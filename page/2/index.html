
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="k49IAqAJW3" />
  
    <title>有药就给你</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="feng">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="有药就给你">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="有药就给你">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="有药就给你">

    
    <link rel="alternative" href="/atom.xml" title="有药就给你" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="有药就给你" title="有药就给你"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="有药就给你">有药就给你</a></h1>
				<h2 class="blog-motto">我是一个慷慨的人，有药都会给你的</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
						<form class="search" action="http://zhannei.baidu.com/cse/search" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/23/kubernetes-node节点注册/" title="kubernetes node节点注册" itemprop="url">kubernetes node节点注册</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-09-23T09:18:11.000Z" itemprop="datePublished"> 发表于 2017-09-23</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>接前面，准备节点直接使用 etcd集群所在机器<br>vm-h1 10.10.1.231<br>vm-h2 10.10.1.232<br>vm-h3 10.10.1.233<br>后期增加<br>10.10.1.234  vm-h4<br>10.10.1.235  vm-h5<br>节点需要启动：<br>Node上面运行三个模块：kubelet、kube-proxy、runtime(docker)。<br>Node自己向服务器注册，所以服务器是不用知道节点的，只需要节点做好配置文件，启动对应的服务程序即可。<br>以下 操作在 vm-h1  10.10.1.231 这台机器。<br>A 安装 yum install kubernetes  docker也会动装上。<br>同样/etc/kubernetes/config 是一些公有配置参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">###</span><br><span class="line"># kubernetes system config</span><br><span class="line">#</span><br><span class="line"># The following values are used to configure various aspects of all</span><br><span class="line"># kubernetes services, including</span><br><span class="line">#</span><br><span class="line">#   kube-apiserver.service</span><br><span class="line">#   kube-controller-manager.service</span><br><span class="line">#   kube-scheduler.service</span><br><span class="line">#   kubelet.service</span><br><span class="line">#   kube-proxy.service</span><br><span class="line"># logging to stderr means we get it in the systemd journal</span><br><span class="line">KUBE_LOGTOSTDERR=&quot;--logtostderr=true&quot;</span><br><span class="line"></span><br><span class="line"># journal message level, 0 is debug</span><br><span class="line">KUBE_LOG_LEVEL=&quot;--v=2&quot;</span><br><span class="line"></span><br><span class="line"># Should this cluster be allowed to run privileged docker containers</span><br><span class="line">KUBE_ALLOW_PRIV=&quot;--allow-privileged=false&quot;</span><br><span class="line"></span><br><span class="line"># How the controller-manager, scheduler, and proxy find the apiserver</span><br><span class="line">KUBE_MASTER=&quot;--master=http://10.10.1.241:8080&quot;</span><br></pre></td></tr></table></figure></p>
<p>KUBE_MASTER= 需要指定到master机器及端口</p>
<p>启动文件：<br> /usr/lib/systemd/system/kubelet.service<br> /usr/lib/systemd/system/kube-proxy.service<br> /usr/lib/systemd/system/docker.service  </p>
<p>B docker先运行起来<br>   systemctl  start  docker<br>   systemctl  enable  docker 随机启动<br>C 编辑配置文件 vi  /etc/kubernetes/kubelet</p>
<pre><code>##
# kubernetes kubelet (minion) config

# The address for the info server to serve on (set to 0.0.0.0 or &quot;&quot; for all interfaces)
KUBELET_ADDRESS=&quot;--address=0.0.0.0&quot;

# The port for the info server to serve on
KUBELET_PORT=&quot;--port=10250&quot;

# You may leave this blank to use the actual hostname
KUBELET_HOSTNAME=&quot;--hostname-override=vm-h1&quot;

# location of the api-server 
KUBELET_API_SERVER=&quot;--api-servers=http://10.10.1.241:8080&quot;

# pod infrastructure container
KUBELET_POD_INFRA_CONTAINER=&quot;--pod-infra-container-image=registry.access.redhat.com/rhel7/pod-infrastructure:latest&quot;

# Add your own!
KUBELET_ARGS=&quot;&quot;
</code></pre><p>KUBELET_HOSTNAME=”–hostname-override=vm-h1” 设置唯一名，这就以主机名配置的</p>
<p>D kube-proxy配置文件，无须特别配置  /etc/kubernetes/proxy，因为一些参数从通用配置文件里加载了<br>E systemctl restart docker kubelet  kube-proxy<br>查看状态及到 master 机器执行  kubectl get node<br>NAME      STATUS    AGE<br>vm-h1     Ready     5d<br>同理，在其他机器执行同样的配置操作。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/kubernetes/">kubernetes</a>►<a class="article-category-link" href="/categories/kubernetes/linux/">linux</a>►<a class="article-category-link" href="/categories/kubernetes/linux/收集/">收集</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/kubernetes/">kubernetes</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/23/kubernetes-master节点配置/" title="kubernetes master节点配置" itemprop="url">kubernetes master节点配置</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-09-23T08:56:01.000Z" itemprop="datePublished"> 发表于 2017-09-23</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>环境接上etcd集群<br>10.10.1.241  vm-manager<br>系统 centos7<br>master 节点需要启动<br> apiserver<br> controller-manager<br> scheduler  三个服务</p>
<p>A 安装  yum install kubernetes 会把所有文件都装上，<br>但我作为master节点只启动相应的服务，只作相应的配置<br>B 修改通用配置文件<br>vi /etc/kubernetes/config<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> ###</span><br><span class="line"># kubernetes system config</span><br><span class="line">#</span><br><span class="line"># The following values are used to configure various aspects of all</span><br><span class="line"># kubernetes services, including</span><br><span class="line">#</span><br><span class="line">#   kube-apiserver.service</span><br><span class="line">#   kube-controller-manager.service</span><br><span class="line">#   kube-scheduler.service</span><br><span class="line">#   kubelet.service</span><br><span class="line">#   kube-proxy.service</span><br><span class="line"># logging to stderr means we get it in the systemd journal</span><br><span class="line">KUBE_LOGTOSTDERR=&quot;--logtostderr=true&quot;</span><br><span class="line"></span><br><span class="line"># journal message level, 0 is debug</span><br><span class="line">KUBE_LOG_LEVEL=&quot;--v=2&quot;</span><br><span class="line"></span><br><span class="line"># Should this cluster be allowed to run privileged docker containers</span><br><span class="line">KUBE_ALLOW_PRIV=&quot;--allow-privileged=false&quot;</span><br><span class="line"></span><br><span class="line"># How the controller-manager, scheduler, and proxy find the apiserver</span><br><span class="line">KUBE_MASTER=&quot;--master=http://127.0.0.1:8080&quot;</span><br></pre></td></tr></table></figure></p>
<p>查看对应的 server 启动脚本，会加载这个配置文件<br>如vi /usr/lib/systemd/system/kube-apiserver.service<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EnvironmentFile=-/etc/kubernetes/config</span><br><span class="line">EnvironmentFile=-/etc/kubernetes/apiserver</span><br></pre></td></tr></table></figure></p>
<p>C 修改apiserver配置件 vi /etc/kubernetes/apiserver<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#指定etcd集群，默认是127.0.0.1，现指定成上一篇所建etcd集群</span><br><span class="line">KUBE_ETCD_SERVERS=&quot;--etcd-servers=http://10.10.1.231:2379,http://10.10.1.232:2379,http://10.10.1.233:2379&quot;</span><br><span class="line">##如果要远程访问，修改下面这句，默认是127.0.0.1</span><br><span class="line">KUBE_SERVICE_ADDRESSES=&quot;--service-cluster-ip-range=10.254.0.0/16&quot;</span><br></pre></td></tr></table></figure></p>
<p>D controller-manager 配置，因为有公有配置文件，无须特别配置<br> vi /etc/kubernetes/controller-manager<br>E scheduler配置，因为有公有配置文件，无须特别配置<br> vi /etc/kubernetes/scheduler<br> F 启动，查看状态<br>  systemctl restart kube-apiserver kube-controller-manager kube-scheduler<br>    systemctl status kube-apiserver kube-controller-manager kube-scheduler<br>  随机启动<br>  systemctl enable kube-apiserver kube-controller-manager kube-scheduler<br>  查看是否在监听8080端口</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/kubernetes/">kubernetes</a>►<a class="article-category-link" href="/categories/kubernetes/linux/">linux</a>►<a class="article-category-link" href="/categories/kubernetes/linux/收集/">收集</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/kubernetes/">kubernetes</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/18/etcd集群实践/" title="etcd集群实践" itemprop="url">etcd集群实践</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-09-18T06:54:09.000Z" itemprop="datePublished"> 发表于 2017-09-18</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>这两天要搞kubernetes ,提及etcd，etcd具体介绍自己百度一下，我们现在实践的etcd集群的建立。<br>环境：<br>vm-h1 10.10.1.231<br>vm-h2 10.10.1.232<br>vm-h3 10.10.1.233<br>都是centos7  没有装防火墙<br>A ,三台机器使用 yum install etcd<br>修改  /usr/lib/systemd/system/etcd.service<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Etcd Server</span><br><span class="line">After=network.target</span><br><span class="line">After=network-online.target</span><br><span class="line">Wants=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line">WorkingDirectory=/var/lib/etcd/</span><br><span class="line">EnvironmentFile=-/etc/etcd/etcd.conf</span><br><span class="line">User=etcd</span><br><span class="line"># set GOMAXPROCS to number of processors</span><br><span class="line">ExecStart=/bin/bash -c &quot;GOMAXPROCS=$(nproc) /usr/bin/etcd --name=\&quot;$&#123;ETCD_NAME&#125;\&quot; \</span><br><span class="line">  --initial-advertise-peer-urls=\&quot;$&#123;ETCD_INITIAL_ADVERTISE_PEER_URLS&#125;\&quot; \</span><br><span class="line">  --listen-peer-urls=\&quot;$&#123;ETCD_LISTEN_PEER_URLS&#125;\&quot; \</span><br><span class="line">  --listen-client-urls=\&quot;$&#123;ETCD_LISTEN_CLIENT_URLS&#125;\&quot; \</span><br><span class="line">  --advertise-client-urls=\&quot;$&#123;ETCD_ADVERTISE_CLIENT_URLS&#125;\&quot; \</span><br><span class="line">  --initial-cluster-token=\&quot;$&#123;ETCD_INITIAL_CLUSTER_TOKEN&#125;\&quot; \</span><br><span class="line">  --initial-cluster=\&quot;$&#123;ETCD_INITIAL_CLUSTER&#125;\&quot; \</span><br><span class="line">  --initial-cluster-state=\&quot;$&#123;ETCD_INITIAL_CLUSTER_STATE&#125;\&quot; \</span><br><span class="line">  --data-dir=\&quot;$&#123;ETCD_DATA_DIR&#125;\&quot; &quot;</span><br><span class="line"></span><br><span class="line">Restart=on-failure</span><br><span class="line">LimitNOFILE=65536</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></p>
<p><span style="color:#f00">原始内容里没有开启集群的代码</span>，折腾好久<br>B 修改 /etc/etcd/etcd.conf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># [member]</span><br><span class="line">ETCD_NAME=&quot;vm-h1&quot;</span><br><span class="line">ETCD_DATA_DIR=&quot;/var/lib/etcd/default.etcd&quot;</span><br><span class="line">#ETCD_WAL_DIR=&quot;&quot;</span><br><span class="line">#ETCD_SNAPSHOT_COUNT=&quot;10000&quot;</span><br><span class="line">#ETCD_HEARTBEAT_INTERVAL=&quot;100&quot;</span><br><span class="line">#ETCD_ELECTION_TIMEOUT=&quot;1000&quot;</span><br><span class="line">ETCD_LISTEN_PEER_URLS=&quot;http://0.0.0.0:2380&quot;</span><br><span class="line">ETCD_LISTEN_CLIENT_URLS=&quot;http://0.0.0.0:2379&quot;</span><br><span class="line">#ETCD_MAX_SNAPSHOTS=&quot;5&quot;</span><br><span class="line">#ETCD_MAX_WALS=&quot;5&quot;</span><br><span class="line">#ETCD_CORS=&quot;&quot;</span><br><span class="line">#</span><br><span class="line">#[cluster]</span><br><span class="line">ETCD_INITIAL_ADVERTISE_PEER_URLS=&quot;http://10.10.1.231:2380&quot;</span><br><span class="line"># if you use different ETCD_NAME (e.g. test), set ETCD_INITIAL_CLUSTER value for this name, i.e. &quot;test=http://...&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER=&quot;vm-h1=http://vm-h1:2380,vm-h2=http://vm-h2:2380,vm-h3=http://vm-h3:2380&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_STATE=&quot;new&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_TOKEN=&quot;etcd-cluster-1&quot;</span><br><span class="line">ETCD_ADVERTISE_CLIENT_URLS=&quot;http://10.10.1.231:2379&quot;</span><br></pre></td></tr></table></figure></p>
<p>对应的个改里面的 ETCD_INITIAL_ADVERTISE_PEER_URLS，ETCD_ADVERTISE_CLIENT_URLS<br>用systemdctl start etcd.<br>如果因为ETCD_DATA_DIR权限错误，也可能以前运行过，可以先停止三个机器，然后把 ETCD_DATA_DIR 目录里内空全删除，再重启机器。</p>
<p>C 检查：<br>etcdctl cluster-health<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">member 28253e92e46b635b is healthy: got healthy result from http://10.10.1.232:2379</span><br><span class="line">member 481331b384513d9e is healthy: got healthy result from http://10.10.1.231:2379</span><br><span class="line">member cbeefbc57f0e8ab9 is healthy: got healthy result from http://10.10.1.233:2379</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ectd/">ectd</a>►<a class="article-category-link" href="/categories/ectd/kubernetes/">kubernetes</a>►<a class="article-category-link" href="/categories/ectd/kubernetes/linux/">linux</a>►<a class="article-category-link" href="/categories/ectd/kubernetes/linux/收集/">收集</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/etcd/">etcd</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/13/vpn-跳板设置/" title="vpn 跳板设置" itemprop="url">vpn 跳板设置</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-09-13T07:08:26.000Z" itemprop="datePublished"> 发表于 2017-09-13</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>为了方便工作，在公司服务器上搞了各种虚拟机试验各种环境，也装了vpn(pptp)，调试也通了。<br>远程联结也能登上各种搞事情，在家就像在公司局域网里。<br>可是，上面说的情况不包括 操蛋的歌华有线，就不知道为什么联不上公司的vpn,不过可以连上阿里云服务<br>器装的vpn,阿里云上上公司的vpn也没任何毛病。所以想着通过一台机器中转上公司的vpn.<br>环境如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">公司内网网段：</span><br><span class="line">   10.10.1.0</span><br><span class="line">公司vpn:</span><br><span class="line">  分配地址是  10.10.10.x</span><br><span class="line">中转服务器：</span><br><span class="line">   分配地址是  10.10.12.x</span><br></pre></td></tr></table></figure></p>
<p>操作流程：<br>1,中转服务器 拨号 上公司vpn ，产生ppp0,获得ip 10.10.10.3<br>2,中转服务器 添加 路由<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route add -net 10.10.0.0/16 dev ppp0</span><br></pre></td></tr></table></figure></p>
<p>此时，在中转服务器可以连上公司 内网的服务器 10.10.1.x<br>3,在要上公司vpn的机器（C）上 拨号 中转服务器上的vpn ,此时，中转服务器上会增加<br>一个ppp1, C机器上上会产生 ppp0, C机器上添加路由<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route add -net 10.10.0.0/16 dev ppp0</span><br></pre></td></tr></table></figure></p>
<p>4,在中间服务器上执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd   --direct --passthrough ipv4 -t nat -I POSTROUTING -o ppp0 -j MASQUERADE -s 10.10.0.0/16</span><br><span class="line"></span><br><span class="line">firewall-cmd  --direct --add-rule ipv4 filter FORWARD 0 -i ppp1 -o ppp0 -j ACCEPT</span><br><span class="line">firewall-cmd  --direct --add-rule ipv4 filter FORWARD 0 -i ppp1 -o ppp0 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>些时C机器应该可在直接访问 10.10.1.x,<br>后面两句不执行也没啥毛病，需要注意 C机器上的MTU不能为默认，因为经过两次vpn，有问题，调小比如1450(看情况吧，有时好像也没问题)就差不多。<br>后记，操蛋的歌华有线，搞出这么多事儿</p>
<p><font style="color:#f00">后记：后面两句不执行，可以ping通，但是连不上，会提示没有路由，可以加上参数 –permanent ，就不用每次执行了, 如果有多个机器要经过这个中转机器，可以用用ppp+表示多个, 如下<br> </font><br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --direct --add-rule ipv4 filter FORWARD 0 -i ppp+ -o ppp0 -j ACCEPT</span><br><span class="line">firewall-cmd --permanent --direct --add-rule ipv4 filter FORWARD 0 -i ppp0 -o ppp+ -j ACCEPT</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/vpn/">vpn</a>►<a class="article-category-link" href="/categories/vpn/linux/">linux</a>►<a class="article-category-link" href="/categories/vpn/linux/收集/">收集</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/vpn/">vpn</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/01/ice起步-三-IceGrid/" title="ice起步(三)_IceGrid" itemprop="url">ice起步(三)_IceGrid</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-09-01T07:23:08.000Z" itemprop="datePublished"> 发表于 2017-09-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>可以理解为分布式的一个架构，一个 IceGrid域由一个注册表（Registry）和任何数目的节点(Node)构成。<br>注册表记录所有的服务地址，实现负载均衡，容灾等功能。<br>1 Registry不依赖其他任务服务，类似dubo的zookeeper注册中心，<br> 配置文件registry.cfg：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">IceGrid.Registry.Client.Endpoints=tcp -p 4061</span><br><span class="line">IceGrid.Registry.Server.Endpoints=tcp</span><br><span class="line">IceGrid.Registry.Internal.Endpoints=tcp</span><br><span class="line">IceGrid.Registry.AdminPermissionsVerifier=IceGrid/NullPermissionsVerifier</span><br><span class="line">IceGrid.Registry.LMDB.Path=/home/ice/registryDb</span><br><span class="line">IceGrid.Registry.DynamicRegistration=1</span><br></pre></td></tr></table></figure></p>
<p>在一台机器上把这个服务运行起来<br>icegridregistry –Ice.Config=/home/ice/registry.cfg  –daemon<br>当然也可以在一台机器运行，为了更好的体验分，我在另一台机器上运行这个服务，需要注意防火墙开发4061端口。<br>2，服务器端代码 IceBoxPrinter 无变化，但配置文件需要修改。<br>这里我重建了一个配置文件 registry.properties 内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#IceBox.InstanceName=SimplePrinterBox</span><br><span class="line">IceBox.InheritProperties=1</span><br><span class="line">Ice.Trace.Network=1</span><br><span class="line">Ice.Trace.ThreadPool=1 </span><br><span class="line">#所有服务初始化完成之后打印 xxx ready</span><br><span class="line">IceBox.PrintServicesReady=SimplePrinterBox iceGrid  ready.....</span><br><span class="line">#SimplePrinter配置</span><br><span class="line">IceBox.Service.SimplePrinter=com.feng.ice.server.icebox.IceBoxPrinter 100 101 102</span><br><span class="line">SimplePrinter.Endpoints=tcp -p 10000  </span><br><span class="line">#可不指定端口号 改成 SimplePrinter.Endpoints=tcp ，随机端口</span><br><span class="line">#不方便本地调试。</span><br><span class="line">#上面无变化，下面新加，需要指定好registry的主机端口号</span><br><span class="line">##iceGrid</span><br><span class="line">Ice.Default.Locator=IceGrid/Locator:tcp -h 10.10.1.201 -p 4061</span><br><span class="line">SimplePrinter.AdapterId=SimplePrinterAdapter</span><br><span class="line"># SimplePrinter.AdapterId=SimplePrinterAdapter这个值，会在客户端用到，需要唯一</span><br></pre></td></tr></table></figure></p>
<p>3 启动IceBox 进行注册：main class com.zeroc.IceBox.Server  添加参数：<br>–Ice.Config=/路径/registry.properties<br>4 客户端调用代码更改<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package com.feng.ice.client;</span><br><span class="line"></span><br><span class="line">import com.feng.ice.Demo.PrinterPrx;</span><br><span class="line"></span><br><span class="line">public class ClientGrid &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		String[] initParams =  new String[]&#123;&quot;--Ice.Default.Locator=IceGrid/Locator:tcp -h 10.10.1.201 -p 4061&quot;&#125;;</span><br><span class="line">		try(com.zeroc.Ice.Communicator communicator = com.zeroc.Ice.Util.initialize(initParams))</span><br><span class="line">        &#123;</span><br><span class="line">           // com.zeroc.Ice.ObjectPrx base = communicator.stringToProxy(&quot;SimplePrinter:default -p 10000&quot;);</span><br><span class="line">            com.zeroc.Ice.ObjectPrx base = communicator.stringToProxy(&quot;SimplePrinter@SimplePrinterAdapter&quot;);</span><br><span class="line">            PrinterPrx printer =  PrinterPrx.checkedCast(base);</span><br><span class="line">            if(printer == null)</span><br><span class="line">            &#123;</span><br><span class="line">                throw new Error(&quot;Invalid proxy&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            for(int i=0;i&lt;10;i++)&#123;</span><br><span class="line">            	 printer.printString(&quot;Hello World! &quot; + i);</span><br><span class="line">            	 System.out.println(&quot;---------&gt;&quot; + i );</span><br><span class="line">            &#125;</span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>communicator.stringToProxy(“SimplePrinter@SimplePrinterAdapter”); 这个前面是 需要和代码和配置文件对应起来<br>5 就这样子。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ice/">ice</a>►<a class="article-category-link" href="/categories/ice/收集/">收集</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ice/">ice</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/01/ice起步(二)IceBox/" title="ice起步(二)_IceBox" itemprop="url">ice起步(二)_IceBox</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-09-01T06:52:11.000Z" itemprop="datePublished"> 发表于 2017-09-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>IceBox 可以代替通常的server,方便进行很多ice服务管理，<br>可以理解成一个类似tomcat的容器，  里面可以有很多服务。<br>服务器 接口方法实现接上一篇。<br>步骤，<br>1，实现com.zeroc.IceBox.Service，完成方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package com.feng.ice.server.icebox;</span><br><span class="line"></span><br><span class="line">import com.feng.ice.server.impl.PrinterI;</span><br><span class="line">import com.zeroc.Ice.Communicator;</span><br><span class="line">import com.zeroc.IceBox.Service;</span><br><span class="line">public class IceBoxPrinter  implements  Service &#123;</span><br><span class="line">	private com.zeroc.Ice.ObjectAdapter _adapter;</span><br><span class="line">	public void start(String name,  Communicator communicator, String[] args) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		System.out.println(  &quot;name:&quot; + name);</span><br><span class="line">		for(String s:args)</span><br><span class="line">		System.out.println(  &quot;args:&quot; + s);</span><br><span class="line">		_adapter = communicator.createObjectAdapter(name);</span><br><span class="line">		com.zeroc.Ice.Object object =   new PrinterI();</span><br><span class="line">		//_adapter.add(object, com.zeroc.Ice.Util.stringToIdentity(&quot;SimplePrinter&quot;));</span><br><span class="line">		_adapter.add(object, com.zeroc.Ice.Util.stringToIdentity(&quot;SimplePrinter&quot;));</span><br><span class="line">		_adapter.activate();</span><br><span class="line">	&#125;</span><br><span class="line">	public void stop() &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		 _adapter.deactivate();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2 配置文件 config.properties<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">IceBox.InheritProperties=1</span><br><span class="line">Ice.Trace.Network=1</span><br><span class="line">Ice.Trace.ThreadPool=1 </span><br><span class="line">#所有服务初始化完成之后打印 xxx ready</span><br><span class="line">IceBox.PrintServicesReady=SimplePrinterBox  ready.....</span><br><span class="line">#SimplePrinter配置</span><br><span class="line">IceBox.Service.SimplePrinter=com.feng.ice.server.icebox.IceBoxPrinter 100 101 102</span><br><span class="line">SimplePrinter.Endpoints=tcp -p 10000</span><br><span class="line">#SendMSM配置</span><br><span class="line">#IceBox.Service.SendMessage=com.feng.ice.server.icebox.IceBoxSendMSM  200 201 202</span><br><span class="line">#SendMessage.Endpoints=tcp -p 10001</span><br></pre></td></tr></table></figure></p>
<p>可以一个配置文件里配置多个服务，如上面的最后三句。<br>3 启动：main class com.zeroc.IceBox.Server  添加参数：<br>–Ice.Config=/路径/config.properties<br>4 客户端访问无变化。<br>5 更多参数参照官网说明。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ice/">ice</a>►<a class="article-category-link" href="/categories/ice/收集/">收集</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ice/">ice</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/01/ice起步-一/" title="ice起步(一)" itemprop="url">ice起步(一)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-09-01T05:46:44.000Z" itemprop="datePublished"> 发表于 2017-09-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>看了一下 ZeroC Ice权威指南，可能版本问题<br>和实践起来完全不一样,生成的类也是和书上提到不一样。<br>特记录下来，供以后参考<br>环境  mac  ice 3.70<br>官网：<a href="https://zeroc.com" target="_blank" rel="noopener">https://zeroc.com</a><br>软件准备，<br>1， mac安装软ice<br>   brew install ice –with-Java，<br>   其他系统安装参照官网。<br>2， eclipse工具安装，选择help-&gt;Eclipse Marketplace<br>    输入zeroc ice 安装。  </p>
<pre><code>偏好设置--&gt; ice builder 配置Ice Home
</code></pre><hr>
<p>开发步骤：<br>1 编写slice文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[[&quot;java:package:com.feng.ice&quot;]]  </span><br><span class="line">module Demo</span><br><span class="line">&#123;</span><br><span class="line">    interface Printer</span><br><span class="line">    &#123;</span><br><span class="line">        void printString(string s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>项目上右键 ice builder –&gt; compile<br>最后生成的包名是 com.feng.ice.Demo;<br>没事改改，尝试他们的关系。<br>将会生成四个文件：<br>_Markert.java<br>_PrinterPrxI.java<br>Printer.java<br>PrinterPrx.java<br>按书上说会生成什么helper的，我反正是没见到，网上大多教程也是生成一大堆，<br>还是实践的人太少啊。<br>2 ，服务器端<br>  A,实现接口<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package com.feng.ice.server.impl;</span><br><span class="line">import com.feng.ice.Demo.Printer;</span><br><span class="line">import com.zeroc.Ice.Current;</span><br><span class="line">public class PrinterI  implements Printer &#123;</span><br><span class="line"> @Override</span><br><span class="line"> public void printString(String s, Current current) &#123;</span><br><span class="line">   System.out.println(&quot; printer server :&quot; + s);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>B,写个main方法，注册服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.feng.ice.server;</span><br><span class="line">import com.feng.ice.server.impl.PrinterI;</span><br><span class="line">public class Server &#123;</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line"> try(com.zeroc.Ice.Communicator communicator = com.zeroc.Ice.Util.initialize(args))</span><br><span class="line">     &#123;</span><br><span class="line">         com.zeroc.Ice.ObjectAdapter adapter = communicator.createObjectAdapterWithEndpoints(&quot;SimplePrinterAdapter&quot;, &quot;default -p 10000&quot;);</span><br><span class="line">         com.zeroc.Ice.Object object = new PrinterI();</span><br><span class="line">         adapter.add(object, com.zeroc.Ice.Util.stringToIdentity(&quot;SimplePrinter&quot;));</span><br><span class="line">         adapter.activate();</span><br><span class="line">         communicator.waitForShutdown();</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>启动起来，就OK了，注意会在10000端口号监听，所以要确保没有占用这个端口号。<br>3 客户端调用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package com.feng.ice.client;</span><br><span class="line">import com.feng.ice.Demo.PrinterPrx;</span><br><span class="line">public class Client &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		</span><br><span class="line">		try(com.zeroc.Ice.Communicator communicator = com.zeroc.Ice.Util.initialize(args)) </span><br><span class="line">        &#123;</span><br><span class="line">            com.zeroc.Ice.ObjectPrx base = communicator.stringToProxy(&quot;SimplePrinter:default -p 10000&quot;);</span><br><span class="line">            PrinterPrx printer =  PrinterPrx.checkedCast(base);</span><br><span class="line">            if(printer == null)</span><br><span class="line">            &#123;</span><br><span class="line">                throw new Error(&quot;Invalid proxy&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            for(int i=0;i&lt;10;i++)&#123;</span><br><span class="line">            	 printer.printString(&quot;Hello World! &quot; + i);</span><br><span class="line">            	 System.out.println(&quot;---------&gt;&quot; + i );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p> communicator.stringToProxy(“SimplePrinter:default -p 10000”);是关键，需要和服务器端保持一致。<br> 这样子一个简单的调用就应该可以了。接下来IceBox</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ice/">ice</a>►<a class="article-category-link" href="/categories/ice/收集/">收集</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ice/">ice</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/08/29/selenium-简单应用所踩过的坑/" title="selenium 简单应用所踩过的坑" itemprop="url">selenium 简单应用所踩过的坑</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-08-29T08:20:14.000Z" itemprop="datePublished"> 发表于 2017-08-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">Selenium 是个很神奇的工具，可以直接把各种浏览器启动起来，然后在里面执行各种操作。</span><br><span class="line">主要还是结合编程用于自动测试。可以直持 .net ,java,python等语言。但我这次使不是用于</span><br><span class="line">测试。这次是为了代理机器上vpn自动拨号，代理机器上的vpn是通过网页输入用户名密码进行登录，</span><br><span class="line">正好符合Selenium场景。</span><br><span class="line">环境:vs2015  </span><br><span class="line">下载： CodedUITestCrossBrowserSetup.msi  </span><br><span class="line">IEDriverServer_Win32_3.5.0.zip/IEDriverServer_x64_3.5.0.zip             selenium-dotnet-3.5.1.zip</span><br><span class="line">   </span><br><span class="line">1，安装   CodedUITestCrossBrowserSetup.msi,解压IEDriverServer_Win32_3.5.0.zip把.exe放入系统路径或是当前执行环境中</span><br><span class="line">  解压 selenium-dotnet-3.5.1.zip得到.net引用包。</span><br><span class="line">2 建立项目，在引用中加上 selenium-dotnet-3.5.1 的 dll</span><br><span class="line"></span><br><span class="line">开发中的问题：</span><br><span class="line">1.    &#123;&quot;Unexpected error launching Internet Explorer.</span><br><span class="line"> Browser zoom level was set to 84%. It should be set to 100%&quot;&#125;</span><br><span class="line"> 解决：</span><br><span class="line"> InternetExplorerOptions options = new InternetExplorerOptions();</span><br><span class="line"> options.IgnoreZoomLevel = true;</span><br><span class="line"> var  driver  =   new InternetExplorerDriver(options);</span><br><span class="line">2 解决非信任证书的提示问题：</span><br><span class="line">    driver.Navigate().GoToUrl(&quot;javascript:document.getElementById(&apos;overridelink&apos;).click()&quot;);</span><br><span class="line">3，window mode窗口的关闭</span><br><span class="line">   这个没有找到好的办法，通过执行js解决</span><br><span class="line">  首先切换到mode窗口，执行js  window.opener = null; window.close() </span><br><span class="line">4，提交按钮不响应，</span><br><span class="line">   简单粗暴，使用js 搞定 document.getElementById(&apos;submit_1&apos;).click()  </span><br><span class="line">5 confirm的确认</span><br><span class="line"> 这个没啥难点，关键是需要一点延时，不然报找不到</span><br><span class="line"> </span><br><span class="line"> 下面是全部代码</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">using OpenQA.Selenium.IE;</span><br><span class="line">using OpenQA.Selenium.Support.UI;</span><br><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">namespace LanchIE</span><br><span class="line">&#123;</span><br><span class="line">    class Program</span><br><span class="line">    &#123;</span><br><span class="line">        static void Main(string[] args)</span><br><span class="line">        &#123;</span><br><span class="line">            InternetExplorerOptions options = new InternetExplorerOptions();</span><br><span class="line">            options.IgnoreZoomLevel = true;</span><br><span class="line">            var  driver  =   new InternetExplorerDriver(options);</span><br><span class="line">            driver.Url = &quot;https://xx.xxx.xxx.xx/&quot;;    </span><br><span class="line">            Console.WriteLine(&quot;start ie ok.....&quot;);</span><br><span class="line">            driver.Navigate().GoToUrl(&quot;javascript:document.getElementById(&apos;overridelink&apos;).click()&quot;);</span><br><span class="line">            //</span><br><span class="line">            String currWindow =  driver.CurrentWindowHandle;</span><br><span class="line">             ICollection&lt;String&gt; windows =  driver.WindowHandles;</span><br><span class="line">                 foreach(String s in  windows )&#123;</span><br><span class="line">                    if (s.Equals(currWindow))</span><br><span class="line">                    &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                    else &#123;</span><br><span class="line">                        var popup = driver.SwitchTo().Window(s);</span><br><span class="line">                        driver.ExecuteScript(&quot; window.opener = null; window.close()&quot;);</span><br><span class="line">                       // Console.WriteLine(s + popup.Url);</span><br><span class="line">                       // popup.Close();</span><br><span class="line">                    &#125;   </span><br><span class="line">                 &#125;</span><br><span class="line">            driver.SwitchTo().Window(currWindow);</span><br><span class="line">            driver.FindElementById(&quot;name_1&quot;).SendKeys(&quot;guangfengtongtian1_cb&quot;);</span><br><span class="line">            driver.FindElementById(&quot;pwd_1&quot;).SendKeys(&quot;picc@bj&quot;);</span><br><span class="line">           Console.WriteLine( driver.FindElementById(&quot;submit_1&quot;).GetAttribute(&quot;value&quot;));</span><br><span class="line">           // driver.FindElementById(&quot;submit_1&quot;).Click();</span><br><span class="line">            var js = &quot;document.getElementById(&apos;submit_1&apos;).click()&quot;;</span><br><span class="line">            driver.ExecuteScript(js);</span><br><span class="line">            //wait 100 uMs *  1000000</span><br><span class="line">            WebDriverWait wait = new WebDriverWait(driver,new  TimeSpan(100000000));</span><br><span class="line">            wait.Until(ExpectedConditions.AlertIsPresent());</span><br><span class="line">             </span><br><span class="line">            var alt = driver.SwitchTo().Alert();</span><br><span class="line">            if (alt != null) &#123;</span><br><span class="line">                alt.Accept();</span><br><span class="line">            &#125;</span><br><span class="line">            driver.SwitchTo().Window(currWindow);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            // driver.FindElementByClassName(&quot;btn_login&quot;).Click();</span><br><span class="line">            //driver.FindElementById</span><br><span class="line">            //  driver.Quit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/收集/">收集</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/selenium/">selenium</a><a href="/tags/测试/">测试</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/08/09/docker-管理工具nsenter/" title="docker 管理工具nsenter" itemprop="url">docker 管理工具nsenter</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-08-09T02:09:05.000Z" itemprop="datePublished"> 发表于 2017-08-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">docker 是不提倡在image里安装sshd用于管理，当然非要这1么干也不是不行。现在说说 nsenter 工具使用</span><br><span class="line">1 安装，安装很容易，以下会把命令会把运行镜像，把nsenter复制到 /usr/local/bin</span><br><span class="line">docker run -v /usr/local/bin:/target jpetazzo/nsenter    </span><br><span class="line">运行完了image都可以不要了，过河折桥  </span><br><span class="line">2 进入docker</span><br><span class="line">先获取docker PID</span><br><span class="line">docker inspect --format &#123;&#123;.State.Pid&#125;&#125; &lt;container_name_or_ID&gt;</span><br><span class="line">例如：</span><br><span class="line">ocker inspect --format &#123;&#123;.State.Pid&#125;&#125; 2c72a3017a25  </span><br><span class="line">29226</span><br><span class="line">然后，</span><br><span class="line">nsenter --target 29226 --mount --uts --ipc --net --pid</span><br><span class="line">29226就是一上步获取到的PID</span><br><span class="line">为了操作简单，可以写个脚本， 列出当前运行的容器，然后选择一个，直接登录 ，核心就两句</span><br><span class="line"></span><br><span class="line">PID=`docker inspect --format &#123;&#123;.State.Pid&#125;&#125;  2c72a3017a25&lt;这个是容器ID&gt;`</span><br><span class="line">nsenter --target $PID --mount --uts --ipc --net --pid  </span><br><span class="line">等我写好了贴上做记录。</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/收集/">收集</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/docker/">docker</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/08/08/jenkins-Wrong-volume-permissions/" title="jenkins  Wrong volume permissions" itemprop="url">jenkins  Wrong volume permissions</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="feng" target="_blank" itemprop="author">feng</a>
		
  <p class="article-time">
    <time datetime="2017-08-08T09:37:24.000Z" itemprop="datePublished"> 发表于 2017-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Linux 主机， root账号运行 docker运行 jenkins 一切正常，</span><br><span class="line">当挂载主机目录时，则出现   </span><br><span class="line"></span><br><span class="line">touch: cannot touch ‘/var/jenkins_home/copy_reference_file.log’: Permission denied</span><br><span class="line">Can not write to /var/jenkins_home/copy_reference_file.log. Wrong volume permissions?</span><br><span class="line"></span><br><span class="line">解决步骤：   </span><br><span class="line">1，确认目录权限  </span><br><span class="line"> docker run -ti --rm --entrypoint=&quot;/bin/bash&quot; jenkins -c &quot;whoami &amp;&amp; id&quot;</span><br><span class="line"> jenkins</span><br><span class="line"> uid=1000(jenkins) gid=1000(jenkins) groups=1000(jenkins) </span><br><span class="line"> 而本地的 /var/jenkins_home 是root用户创建， </span><br><span class="line"> </span><br><span class="line"> uid=0(root) gid=0(root) 组=0(root) 环境=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023</span><br><span class="line">2，/var/jenkins_home </span><br><span class="line">chown -R 1000 /var/jenkins_home  </span><br><span class="line">注意，可能本地没有1000的用户，如果没有需要创建，但用户名不必为jenkins</span><br><span class="line">如果有则可不必计较，虽然用户名可能不一是jenkins</span><br><span class="line">3,再启动试试，可能还是有问题</span><br><span class="line">这时查看 SELinux状态  /usr/sbin/sestatus -v    </span><br><span class="line">如果没有关闭，需要关闭</span><br><span class="line">关闭SELinux：</span><br><span class="line">1、临时关闭（不用重启机器）：</span><br><span class="line">setenforce 0                  ##设置SELinux 成为permissive模式</span><br><span class="line">                              ##setenforce 1 设置SELinux 成为enforcing模式</span><br><span class="line">2、修改配置文件需要重启机器：</span><br><span class="line">修改/etc/selinux/config 文件</span><br><span class="line">将SELINUX=enforcing改为SELINUX=disabled</span><br><span class="line">重启机器即可</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/收集/">收集</a>►<a class="article-category-link" href="/categories/收集/各种坑/">各种坑</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/docker/">docker</a><a href="/tags/jenkins/">jenkins</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/blog/" title="blog">blog<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/kubernetes/linux/收集/docker/" title="docker">docker<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/ectd/" title="ectd">ectd<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/node/excel/" title="excel">excel<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ice/" title="ice">ice<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/kubernetes/linux/jenkins/" title="jenkins">jenkins<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ectd/kubernetes/" title="kubernetes">kubernetes<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/kubernetes/" title="kubernetes">kubernetes<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/kubernetes/linux/" title="linux">linux<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/ectd/kubernetes/linux/" title="linux">linux<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/vpn/linux/" title="linux">linux<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/node/" title="node">node<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/vpn/" title="vpn">vpn<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/收集/各种坑/" title="各种坑">各种坑<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/各种坑/" title="各种坑">各种坑<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/开发/" title="开发">开发<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/总结/" title="总结">总结<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/kubernetes/linux/收集/" title="收集">收集<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/ice/收集/" title="收集">收集<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/kubernetes/linux/jenkins/收集/" title="收集">收集<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/vpn/linux/收集/" title="收集">收集<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ectd/kubernetes/linux/收集/" title="收集">收集<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/收集/" title="收集">收集<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/blog/软件/" title="软件">软件<sup>2</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/kubernetes/" title="kubernetes">kubernetes<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/linux/" title="linux">linux<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/开发/" title="开发">开发<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/nginx/" title="nginx">nginx<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/node/" title="node">node<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/thrift/" title="thrift">thrift<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/ice/" title="ice">ice<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/go/" title="go">go<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/vpn/" title="vpn">vpn<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/hexo/" title="hexo">hexo<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/https/" title="https">https<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/cas/" title="cas">cas<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/HttpClient/" title="HttpClient">HttpClient<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/etcd/" title="etcd">etcd<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/webservice/" title="webservice">webservice<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/hibernate/" title="hibernate">hibernate<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/tess4j/" title="tess4j">tess4j<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/jquery/" title="jquery">jquery<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/mongo/" title="mongo">mongo<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 世界上只有一种英雄主义,就是看清生活的真相之后依然热爱生活。 <br/>
			</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2018 
		
		<a href="/about" target="_blank" title="feng">feng</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>

